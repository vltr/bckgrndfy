/* Please see README.md for LICENSE and stuff! */!function(){"use strict";var a={hexTripletRe_:/#(.)(.)(.)/,safeFloor:function(a,b){return Math.floor(a+(b||2e-15))},clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},normalizeHex:function(b){return 4===b.length&&(b=b.replace(a.hexTripletRe_,"#$1$1$2$2$3$3")),b.toLowerCase()},blend:function(b,c,d){return d=a.clamp(d,0,1),[Math.round(d*b[0]+(1-d)*c[0]),Math.round(d*b[1]+(1-d)*c[1]),Math.round(d*b[2]+(1-d)*c[2])]},hexToRgb:function(b){b=a.normalizeHex(b);var c=parseInt(b.substr(1,2),16),d=parseInt(b.substr(3,2),16),e=parseInt(b.substr(5,2),16);return[c,d,e]}},b={componentToHex:function(a){var b=a.toString(16);return 1===b.length?"0"+b:b},rgbToHex:function(a,c,d){return"#"+b.componentToHex(a)+b.componentToHex(c)+b.componentToHex(d)},extendObj:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}},c={EPSILON:1/1048576,supertriangle_:function(a){var b,c,d,e,f,g,h=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,j=Number.NEGATIVE_INFINITY,k=Number.NEGATIVE_INFINITY;for(b=a.length-1;b>-1;b--)a[b][0]<h&&(h=a[b][0]),a[b][0]>j&&(j=a[b][0]),a[b][1]<i&&(i=a[b][1]),a[b][1]>k&&(k=a[b][1]);return c=j-h,d=k-i,e=Math.max(c,d),f=h+.5*c,g=i+.5*d,[[f-20*e,g-e],[f,g+20*e],[f+20*e,g-e]]},circumcircle_:function(a,b,d,e){var f,g,h,i,j,k,l,m,n,o,p=a[b][0],q=a[b][1],r=a[d][0],s=a[d][1],t=a[e][0],u=a[e][1],v=Math.abs(q-s),w=Math.abs(s-u);if(v<c.EPSILON&&w<c.EPSILON)throw new Error("Eek! Coincident points!");return v<c.EPSILON?(i=-((t-r)/(u-s)),k=(r+t)/2,m=(s+u)/2,f=(r+p)/2,g=i*(f-k)+m):w<c.EPSILON?(h=-((r-p)/(s-q)),j=(p+r)/2,l=(q+s)/2,f=(t+r)/2,g=h*(f-j)+l):(h=-((r-p)/(s-q)),i=-((t-r)/(u-s)),j=(p+r)/2,k=(r+t)/2,l=(q+s)/2,m=(s+u)/2,f=(h*j-i*k+m-l)/(h-i),g=v>w?h*(f-j)+l:i*(f-k)+m),n=r-f,o=s-g,{i:b,j:d,k:e,x:f,y:g,r:n*n+o*o}},dedup_:function(a){for(var b,c,d,e,f,g=a.length;g>0;)for(d=a[--g],c=a[--g],b=g;b>0;)if(f=a[--b],e=a[--b],c===e&&d===f||c===f&&d===e){a.splice(g,2),a.splice(b,2);break}},triangulate:function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p=a.length;if(3>p)return[];if(a=a.slice(0),b)for(d=p-1;d>-1;d--)a[d]=a[d][b];for(f=new Array(p),d=p-1;d>-1;d--)f[d]=d;for(f.sort(function(b,c){return a[c][0]-a[b][0]}),g=c.supertriangle_(a),a.push(g[0],g[1],g[2]),h=[c.circumcircle_(a,p+0,p+1,p+2)],i=[],j=[],d=f.length-1;d>-1;d--){for(j.length=0,o=f[d],e=h.length-1;e>-1;e--)k=a[o][0]-h[e].x,k>0&&k*k>h[e].r?(i.push(h[e]),h.splice(e,1)):(l=a[o][1]-h[e].y,k*k+l*l-h[e].r>c.EPSILON||(j.push(h[e].i,h[e].j,h[e].j,h[e].k,h[e].k,h[e].i),h.splice(e,1)));for(c.dedup_(j),e=j.length;e>0;)n=j[--e],m=j[--e],h.push(c.circumcircle_(a,m,n,o))}for(d=h.length-1;d>-1;d--)i.push(h[d]);for(h.length=0,d=i.length-1;d>-1;d--)i[d].i<p&&i[d].j<p&&i[d].k<p&&h.push(i[d].i,i[d].j,i[d].k);return h},contains:function(a,b){if(b[0]<a[0][0]&&b[0]<a[1][0]&&b[0]<a[2][0]||b[0]>a[0][0]&&b[0]>a[1][0]&&b[0]>a[2][0]||b[1]<a[0][1]&&b[1]<a[1][1]&&b[1]<a[2][1]||b[1]>a[0][1]&&b[1]>a[1][1]&&b[1]>a[2][1])return null;var c=a[1][0]-a[0][0],d=a[2][0]-a[0][0],e=a[1][1]-a[0][1],f=a[2][1]-a[0][1],g=c*f-d*e;if(0===g)return null;var h=(f*(b[0]-a[0][0])-d*(b[1]-a[0][1]))/g,i=(c*(b[1]-a[0][1])-e*(b[0]-a[0][0]))/g;return 0>h||0>i||h+i>1?null:[h,i]}},d={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},e={width:400,height:200,cellSize:30,variance:.75,palette:d,shareColor:!0,lineWidth:1},f=function(b){var c=a.safeFloor((b[0][0]+b[1][0]+b[2][0])/3),d=a.safeFloor((b[0][1]+b[1][1]+b[2][1])/3);return[c,d]},g=function(b){if(b.palette instanceof Array)return b.palette[a.safeFloor(Math.random()*b.palette.length)];var c=Object.keys(b.palette);return b.palette[c[a.safeFloor(Math.random()*c.length)]]},h=function(a){var c=document.createElement("canvas");a.elementId&&(c.id=a.elementId),c.width=a.width,c.height=a.height;var d=c.getContext("2d");d.canvas.width=a.width,d.canvas.height=a.height;for(var e=0;e<a.triangles.length;e++){var f=a.triangles[e];d.fillStyle=d.strokeStyle=b.rgbToHex(f.color[0],f.color[1],f.color[2]),d.lineWidth=a.lineWidth,d.beginPath(),d.moveTo.apply(d,f.vertices[0]),d.lineTo.apply(d,f.vertices[1]),d.lineTo.apply(d,f.vertices[2]),d.fill(),d.stroke()}return c},i=function(b,c,d){var e,f,g=a.safeFloor(c/b.width*(b.xColors.length-1));0>g&&(g=0),g>=b.xColors.length&&(g=b.xColors.length-1);var h=g+1;h>=b.xColors.length&&(h=b.xColors.length-1);var i=b.width/b.xColors.length,j=c%i/i;e=a.blend(a.hexToRgb(b.xColors[g]),a.hexToRgb(b.xColors[h]),j);var k=a.safeFloor(d/b.height*(b.yColors.length-1));0>k&&(k=0),k>=b.yColors.length&&(k=b.yColors.length-1);var l=k+1;l>=b.yColors.length&&(l=b.yColors.length-1);var m=b.height/b.yColors.length,n=d%m/m;return f=a.blend(a.hexToRgb(b.yColors[k]),a.hexToRgb(b.yColors[l]),n),a.blend(e,f,.5)},j=function(a){var d={};d=b.extendObj(d,e),d=b.extendObj(d,a||{}),d.xColors=g(d),d.shareColor?d.yColors=d.xColors:d.yColors=g(d),d.points=k(d),d.indices=c.triangulate(d.points),d.triangles=[];for(var h=0;h<d.indices.length;h+=3){var j=[d.points[d.indices[h]],d.points[d.indices[h+1]],d.points[d.indices[h+2]]],l=f(j);d.triangles.push({vertices:j,color:i(d,l[0],l[1])})}return d},k=function(b){b.xCellAmount=a.safeFloor((b.width+4*b.cellSize)/b.cellSize),b.yCellAmount=a.safeFloor((b.height+4*b.cellSize)/b.cellSize),b.xOutBounds=(b.xCellAmount*b.cellSize-b.width)/2,b.yOutBounds=(b.yCellAmount*b.cellSize-b.height)/2,b.variance=b.cellSize*b.variance/2;for(var c=[],d=-1*b.xOutBounds;d<b.width+b.xOutBounds;d+=b.cellSize)for(var e=-b.yOutBounds;e<b.height+b.yOutBounds;e+=b.cellSize){var f=d+b.cellSize/2+Math.random()*b.variance*2-b.variance,g=e+b.cellSize/2+Math.random()*b.variance*2-b.variance;c.push([a.safeFloor(f),a.safeFloor(g)])}return c},l=function(a,b){var c=j(a,b);return h(c)};"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return l}):"undefined"!=typeof module&&module.exports?(module.exports=l,module.exports.bckgrndfy=l):window.bckgrndfy=l}();